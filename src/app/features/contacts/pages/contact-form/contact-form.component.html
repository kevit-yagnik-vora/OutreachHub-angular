<div class="p-6 max-w-2xl container m-auto">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-800">
      {{ isEdit ? 'Edit Contact' : 'New Contact' }}
    </h1>
    <p class="text-gray-500">Store name, phone and categorize with tags.</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-5 bg-white p-6 rounded-2xl border shadow">
    <!-- Name -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input formControlName="name" type="text"
             class="w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
             placeholder="John Doe" />
      <div *ngIf="form.controls.name.touched && form.controls.name.invalid" class="text-xs text-red-600 mt-1">
        Name is required
      </div>
    </div>

    <!-- Phone -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
      <input formControlName="phoneNumber" type="tel"
             class="w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
             placeholder="7899874566" />
      <div *ngIf="form.controls.phoneNumber.touched && form.controls.phoneNumber.invalid" class="text-xs text-red-600 mt-1">
        Valid phone is required
      </div>
    </div>

    <!-- Tags (chips) -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Tags</label>

      <div class="flex flex-wrap gap-2 mb-2">
        <span *ngFor="let tag of tags; let i = index"
              class="inline-flex items-center bg-indigo-50 text-indigo-700 px-2 py-1 rounded-full text-xs">
          {{ tag }}
          <button type="button" class="ml-1 text-indigo-600 hover:text-indigo-800" (click)="removeTag(i)">×</button>
        </span>
      </div>

      <input
        #tagInput
        type="text"
        (keydown.enter)="addTag(tagInput); $event.preventDefault()"
        (keydown)="handleComma($event, tagInput)"
        placeholder="Type and press Enter…"
        class="w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
      />
      <p class="text-xs text-gray-500 mt-1">Press <b>Enter</b> or <b>,</b> to add a tag.</p>
    </div>

    <!-- Actions -->
    <div class="flex items-center gap-3 pt-2">
      <button type="submit"
        class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-xl shadow disabled:opacity-50"
        [disabled]="form.invalid || saving">
        {{ saving ? 'Saving…' : (isEdit ? 'Update Contact' : 'Create Contact') }}
      </button>
      <a routerLink="/contacts" class="px-4 py-2 rounded-xl border">Cancel</a>
    </div>
  </form>
</div>
